<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JUVISH â€” Duo Habit Tracker</title>
  <meta name="description" content="Side-by-side couple habit tracker for Jushu & Vishu â€” analytics, XP, streaks, and local autosave.">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at 1px 1px, rgba(244,63,94,.08) 1px, transparent 0) 0 0/22px 22px;
      pointer-events: none;
    }
    .habit-item { transition: 0.2s; }
    .habit-item.done { background: #dcfce7; border-color: #22c55e; }
  </style>
</head>
<body class="bg-[#fbfbfd] text-slate-800 font-sans">
  <div class="max-w-7xl mx-auto p-6">
    <header class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-8">
      <h1 class="text-3xl font-extrabold">ðŸ’– JUVISH â€” Duo Habit Tracker</h1>
      <p class="text-sm text-slate-500">Side-by-side daily tracking for <b>Jushu</b> & <b>Vishu</b> Â· XP Â· Streaks Â· Analytics</p>
    </header>

    <!-- Challenge -->
    <section class="rounded-2xl border bg-white shadow p-4 mb-6">
      <div class="flex items-center justify-between">
        <div>
          <h2 class="text-lg font-bold">ðŸŒˆ 45-Day Challenge</h2>
          <p class="text-sm text-slate-500" id="challengeLabel">Day 1 of 45</p>
        </div>
        <div class="w-48 bg-gray-200 h-3 rounded-full overflow-hidden">
          <div id="challengeBar" class="h-3 bg-pink-500 rounded-full" style="width: 0%"></div>
        </div>
      </div>
    </section>

    <!-- Side-by-side tracker -->
    <section class="grid lg:grid-cols-2 gap-6">
      <!-- Jushu -->
      <div class="rounded-2xl border bg-white p-4">
        <h2 class="text-rose-500 text-lg font-bold mb-2">ðŸ’— Jushu</h2>
        <ul id="jushuList" class="space-y-2 text-sm"></ul>
      </div>

      <!-- Vishu -->
      <div class="rounded-2xl border bg-white p-4">
        <h2 class="text-sky-500 text-lg font-bold mb-2">ðŸ’™ Vishu</h2>
        <ul id="vishuList" class="space-y-2 text-sm"></ul>
      </div>
    </section>

    <!-- Analytics -->
    <section class="mt-10">
      <h2 class="font-bold text-xl mb-4">ðŸ“Š Advanced Analytics</h2>
      <div class="rounded-2xl border bg-white p-4">
        <canvas id="chart" height="120"></canvas>
      </div>
    </section>

    <footer class="mt-12 text-center text-xs text-slate-400">
      Built for ðŸ’ž Jushu âœ• Vishu Â· Data stays private on your device Â· Export / Import to move devices
    </footer>
  </div>

  <script>
    const habits = [
      { text: "ðŸŒ… Wake up before 8AM" },
      { text: "ðŸ’§ Drink 3 liters of water" },
      { text: "ðŸ§˜ Meditation / 10 min mindfulness" },
      { text: "ðŸš« No fap" },
      { text: "ðŸ“µ No phone till 9AM" },
      { text: "ðŸŽ Eat fruits" }
    ];

    const vishuHabits = [
      { text: "ðŸŒ… Wake up before 8AM" },
      { text: "ðŸ’§ Drink 3 liters of water" },
      { text: "ðŸ‹ï¸ Workout / Yoga" },
      { text: "ðŸš« No fap" },
      { text: "ðŸ“µ No phone till 9AM" },
      { text: "ðŸ³ Eat home food" }
    ];

    const KEY = "juvish-habits";
    let db = JSON.parse(localStorage.getItem(KEY)) || { jushu: {}, vishu: {}, day: 1 };

    function renderList(person, listId, data) {
      const ul = document.getElementById(listId);
      ul.innerHTML = "";
      data.forEach((h, i) => {
        const li = document.createElement("li");
        const done = db[person][i];
        li.className = `habit-item rounded-xl border p-3 cursor-pointer ${done ? "done" : ""}`;
        li.textContent = h.text;
        li.onclick = () => {
          db[person][i] = !db[person][i];
          save();
          renderAll();
        };
        ul.appendChild(li);
      });
    }

    function renderChallenge() {
      const day = db.day || 1;
      const total = 45;
      const pct = Math.min(100, Math.round((day / total) * 100));
      document.getElementById("challengeBar").style.width = pct + "%";
      document.getElementById("challengeLabel").textContent = `Day ${day} of ${total}`;
    }

    function nextDay() {
      db.day = (db.day || 1) + 1;
      db.jushu = {};
      db.vishu = {};
      save();
      renderAll();
    }

    function renderChart() {
      const ctx = document.getElementById("chart").getContext("2d");
      const days = Array.from({ length: db.day }, (_, i) => i + 1);
      const jScores = days.map(d => Math.random() * 100);
      const vScores = days.map(d => Math.random() * 100);
      new Chart(ctx, {
        type: "line",
        data: {
          labels: days,
          datasets: [
            { label: "Jushu", data: jScores, borderColor: "#f43f5e" },
            { label: "Vishu", data: vScores, borderColor: "#0ea5e9" }
          ]
        },
        options: { plugins: { legend: { display: true } } }
      });
    }

    function save() {
      localStorage.setItem(KEY, JSON.stringify(db));
    }

    function renderAll() {
      renderList("jushu", "jushuList", habits);
      renderList("vishu", "vishuList", vishuHabits);
      renderChallenge();
      renderChart();
    }

    renderAll();
  </script>
</body>
</html>

